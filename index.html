<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Discover the latest and most popular films at 9TVMovie. Gain exclusive access to our constantly updated collection, enjoy regular releases, and immerse yourself in quality entertainment. Explore the world of movies at your fingertips!">
  <meta name="keywords" content="9tvmovie, 9TVMovie Online, watch Movie & TVShow for Free, Popular Movie">
  <meta name="author" content="9TVMovie">
  <title>9TVMovie :: Watch Movie & TVShow for Free</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <!-- Tambahkan FontAwesome jika belum ada -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="/assets/style.css">
</head>
<body>

    <header class="bg-primary text-white text-center py-1">
        <div class="container">
            <h1>Welcome to 9TVMovie!</h1>
            <p class="lead">Discover the latest and most popular films at 9TVMovie. Gain exclusive access to our constantly updated collection, enjoy regular releases, and immerse yourself in quality entertainment. Explore the world of movies at your fingertips!</p>
        </div>
    </header>

    <nav class="navbar navbar-expand-lg bg-dark text-white padd">
      <div class="container-fluid">
        <a class="navbar-brand" href="/">9TVMovie</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <!-- Movie -->
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Movie
              </a>
              <ul class="dropdown-menu" id="movieGenres">
                <li><a class="dropdown-item" href="#">Loading...</a></li>
              </ul>
            </li>
            <!-- TVShow -->
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  TVShow
                </a>
                <ul class="dropdown-menu" id="tvGenres">
                    <li><a class="dropdown-item" href="#">Loading...</a></li>
                  </ul>
              </li>
            <!-- Menudrop submenu "Movie" dan "TV" -->
<li class="nav-item dropdown">
    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      Genre
    </a>
    <ul class="dropdown-menu">
      <!-- Submenu "Movie" -->
      <li>
        <a class="dropdown-item" href="#">Movie</a>
        <ul class="submenu">
          <li><a class="dropdown-item" href="#">Category Movie List</a></li>
          <!-- Tambahkan item submenu Movie lainnya jika diperlukan -->
        </ul>
      </li>
      <!-- Submenu "TV" -->
      <li>
        <a class="dropdown-item" href="#">TV</a>
        <ul class="submenu">
          <li><a class="dropdown-item" href="#">Category TV List</a></li>
          <!-- Tambahkan item submenu TV lainnya jika diperlukan -->
        </ul>
      </li>
      <li><a class="dropdown-item" href="#">Another action</a></li>
      <li><hr class="dropdown-divider"></li>
      <li><a class="dropdown-item" href="#">Something else here</a></li>
    </ul>
  </li>
  <!-- Menudrop submenu "Movie" dan "TV" END -->
            <li class="nav-item">
              <a class="nav-link disabled" aria-disabled="true">Disabled</a>
            </li>
          </ul>
          <form class="d-flex" role="search">
            <input class="form-control me-2" type="text" id="searchInput" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="button" onclick="cariFilm()">Search</button>
          </form>
        </div>
      </div>
    </nav>

<main>

  <div class="container mt-5">
    <h1 class="mb-4">Weekly Trend movies</h1>
    <div id="movie-list-trending" class="row"></div>

    <h1 class="mb-4 mt-5">Now Playing Movies</h1>
    <div id="movie-list-now-playing" class="row"></div>

    <h1 class="mb-4 mt-5">Upcoming Movies</h1>
    <div id="movie-list-upcoming" class="row"></div>
  </div>
</main>
<footer class="bg-dark text-white text-center py-3">
    <div class="container">
        <p>Copyright &copy; 2023 <a href="/">9TVMovie</a>. All Rights Reserved.</p>
    </div>
</footer>
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/assets/9tvmovie.js"></script>

  <script>
    const nowPlayingUrl = `https://api.themoviedb.org/3/movie/now_playing?language=en-US&page=1&api_key=${apiKey}`;
    const upcomingUrl = `https://api.themoviedb.org/3/movie/upcoming?language=en-US&page=1&api_key=${apiKey}`;
    const trendingUrl = `https://api.themoviedb.org/3/trending/movie/week?language=en-US&page=1&api_key=${apiKey}`;
    const genreApiUrl = `https://api.themoviedb.org/3/genre/movie/list?language=en&api_key=${apiKey}`;
    const tvGenreApiUrl = `https://api.themoviedb.org/3/genre/tv/list?language=en&api_key=${apiKey}`;

    $(document).ready(function() {
      // Fetch Now Playing Movies from TMDb API
      $.ajax({
        url: nowPlayingUrl,
        method: 'GET',
        dataType: 'json',
        success: function(data) {
          displayMovies(data.results, 'movie-list-now-playing');
        },
        error: function(error) {
          console.error('Error fetching Now Playing data:', error);
        }
      });

      // Fetch Upcoming Movies from TMDb API
      $.ajax({
        url: upcomingUrl,
        method: 'GET',
        dataType: 'json',
        success: function(data) {
          displayMovies(data.results, 'movie-list-upcoming');
        },
        error: function(error) {
          console.error('Error fetching Upcoming data:', error);
        }
      });

      // Fetch Trending Movies from TMDb API
      $.ajax({
        url: trendingUrl,
        method: 'GET',
        dataType: 'json',
        success: function(data) {
          displayMovies(data.results, 'movie-list-trending');
        },
        error: function(error) {
          console.error('Error fetching Trending data:', error);
        }
      });
    });

    function fetchMovieGenres() {
  $.ajax({
    url: genreApiUrl,
    method: 'GET',
    success: function(data) {
      // Panggil fungsi untuk menampilkan genre ke dalam dropdown
      displayMovieGenres(data.genres);
    },
    error: function(error) {
      console.error('Error:', error);
      // Jika terjadi kesalahan, tampilkan pesan kesalahan pada dropdown
      $('#movieGenres').html('<li><a class="dropdown-item" href="#">Error fetching genres</a></li>');
    }
  });
}

// Fungsi untuk menampilkan genre ke dalam dropdown
function displayMovieGenres(genres) {
  const dropdownMenu = $('#movieGenres');

  // Kosongkan dropdown menu
  dropdownMenu.empty();

  // Tambahkan item untuk setiap genre
  genres.forEach(genre => {
    const genreItem = `<li><a class="dropdown-item" href="#">${genre.name}</a></li>`;
    dropdownMenu.append(genreItem);
  });
}

// Panggil fungsi untuk mengambil dan menampilkan genre saat halaman dimuat
fetchMovieGenres();

// Fungsi untuk mengambil data genre TV dari API
function fetchTvGenres() {
  $.ajax({
    url: tvGenreApiUrl,
    method: 'GET',
    success: function(data) {
      // Panggil fungsi untuk menampilkan genre TV ke dalam dropdown
      displayTvGenres(data.genres);
    },
    error: function(error) {
      console.error('Error:', error);
      // Jika terjadi kesalahan, tampilkan pesan kesalahan pada dropdown
      $('#tvGenres').html('<li><a class="dropdown-item" href="#">Error fetching genres</a></li>');
    }
  });
}

// Fungsi untuk menampilkan genre TV ke dalam dropdown
function displayTvGenres(genres) {
  const dropdownMenu = $('#tvGenres');

  // Kosongkan dropdown menu
  dropdownMenu.empty();

  // Tambahkan item untuk setiap genre TV
  genres.forEach(genre => {
    const genreItem = `<li><a class="dropdown-item" href="#">${genre.name}</a></li>`;
    dropdownMenu.append(genreItem);
  });
}

// Panggil fungsi untuk mengambil dan menampilkan genre TV saat halaman dimuat
fetchTvGenres();


    function displayMovies(movies, containerId) {
      const movieListContainer = $(`#${containerId}`);

      // Hanya ambil 12 film pertama
      const limitedMovies = movies.slice(0, 12);

      limitedMovies.forEach(movie => {
        const posterPath = movie.poster_path ? `https://image.tmdb.org/t/p/w500${movie.poster_path}` : 'https://via.placeholder.com/150';
        const releaseDate = movie.release_date ? new Date(movie.release_date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) : 'n/a';
        const yearMovie = movie.release_date ? new Date(movie.release_date).getFullYear() : 'n/a';
        const movieType = 'Movie'; // Tambahkan tipe film di sebelah kanan vote_average
        const roundedVoteAverage = movie.vote_average.toFixed(1);
        
        const movieCard = `
          <div class="col-md-2 mb-4">
            <div class="card position-relative">
              <div class="overlay">
                <i class="fas fa-play-circle play-icon"></i>
              </div>
              <div class="rang"><i class="fa-solid fa-star"></i>
                ${roundedVoteAverage}
              </div>
              <div class="rang-right">${movieType}
              </div>
              <img src="${posterPath}" class="card-img-top" alt="${movie.title}">
              <div class="card-body">
                <h5 class="card-title">${movie.title} <span class='yearS'>(${yearMovie})</span></h5>
                <p class="card-text">${releaseDate}</p>
              </div>
            </div>
          </div>
        `;

        movieListContainer.append(movieCard);
      });
    }
  </script>

</body>
</html>